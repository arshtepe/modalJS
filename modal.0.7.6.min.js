(function(){function e(a){var b=this,c;this.params=a=a||{};this._windowHandlers={};void 0!==a.window&&this.setWindow(a.window);l(this);this._resizeHandler=function(){b.isOpen&&(c&&clearTimeout(c),c=setTimeout(function(){g(b)},10))};window.addEventListener("resize",this._resizeHandler,!1)}function m(a,b){void 0!==a.window&&a.window.removeEventListener("click",a._windowHandler);a._windowHandler=function(c){n.call(b,c,a)};b.addEventListener("click",a._windowHandler)}function n(a,b){var c=a.target,d=
b.params.closeButtonCls;if(h(c,d))b.hide();else for(;(c=c.parentNode)!==this;)if(h(c,d)){b.hide();break}}function g(a){var b=a.window,c=(window.innerHeight-b.offsetHeight)/2,d=(window.innerWidth-b.offsetWidth)/2;a.params.NoUseAnimate||p(b,k);setTimeout(function(){b.style.top=c+"px";b.style.left=d+"px"},0)}function f(a){return"object"===typeof a&&1===a.nodeType&&"object"===typeof a.style&&"object"===typeof a.ownerDocument}function l(a){var b=document.createElement("div");b.className="modal-overlay";
a._closeHandler=function(){a.onclose&&!1===a.onclose.call(a)&&a.hide()};b.addEventListener("click",a._closeHandler,!1);a.overlay=document.body.appendChild(b)}function p(a,b){for(var c=a.className.split(" "),d=c.length;d;d--)if(c[d]==b)return;c.push(b);a.className=c.join(" ")}function h(a,b){for(var c=a.className.split(" "),d=c.length-1;0<=d;d--)if(c[d]==b)return!0;return!1}var k="modal-window-animate";e.prototype.setAnimationPosition=function(){this.window.style.top=-this.window.clientHeight+"px"};
e.prototype.setWindow=function(a){if(!f(a))throw"Incorrect parameter 'window', expected Element";void 0!==this.params.closeButtonCls&&m(this,a);this.window=a;a.style.position="fixed";a.style.zIndex="100000";return this};e.prototype.show=function(){if(!this.isOpen&&f(this.window))return this.onopen&&this.onopen(),this.overlay.style.display="block",this.window.style.display="block",this.setAnimationPosition(),g(this),this.onopened&&this.onopened(),this.isOpen=!0};e.prototype.hide=function(){if(this.isOpen&&
f(this.window)){this.onclose&&this.onclose();this.overlay.style.display="";this.window.style.display="none";for(var a=this.window,b=k,c=a.className.split(" "),d=0;d<c.length;d++)c[d]==b&&c.splice(d--,1);a.className=c.join(" ");this.isOpen=!1;this.onclosed&&this.onclosed();return!0}};e.prototype.destroy=function(a){this.hide();window.removeEventListener("resize",this._resizeHandler);this.overlay.removeEventListener("click",this._closeHandler);var b=this.overlay;b.parentNode.removeChild(b);this.overlay=
void 0;ctx.window.removeEventListener("click",ctx._windowHandler);a&&f(this.window)&&(a=this.window,a.parentNode.removeChild(a),this.window=void 0)};window.ModalJS=e})();